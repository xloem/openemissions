id: openemissions_histogram_binary_op
label: Histogram Binary Operation
category: '[openemissions]'

templates:
    imports: import openemissions
    make: |-
        openemissions.histogram_binary_op_${freq_type.fnc}(${min}, ${max}, lambda x, y: eval(${op}, locals(), globals()), ${nbuckets})

parameters:
-   id: freq_type
    label: Type
    dtype: enum
    default: float
    options: ["UInt64", "Float", "Double"]
    option_attributes:
        fnc: ["u64", "f32", "f64"]
        type: [s64, f32, f64]
    hide: part
-   id: min
    label: Minimum
    dtype: real
-   id: max
    label: Maximum
    dtype: real
-   id: op
    label: Operation
    dtype: string
    default: "x + y"
-   id: nbuckets
    label: Histogram Vec Length
    dtype: int
    default: 1024

inputs:
-   label: X Histogram
    domain: stream
    dtype: ${ freq_type.type }
    vlen: ${ nbuckets }
-   label: Y Histogram
    domain: stream
    dtype: ${ freq_type.type }
    vlen: ${ nbuckets }

outputs:
-   label: Result Histogram
    domain: stream
    dtype: ${ freq_type. type }
    vlen: ${ nbuckets }

file_format: 1
